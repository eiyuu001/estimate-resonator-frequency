## 処理の流れ

1. 測定器由来の偽応答を除外する.
2. 高パワー帯のピークを検出し, グループ化する. 現在は単純にピークを左から順に見ていき, 右下にあれば同じグループ, 右上にあれば新しいグループとしている.
3. 低パワー帯のピークを検出する.
4. 高パワー帯のピークと低パワー帯のピークを対応づける.
5. 対応づけられた応答それぞれについて, 近くにある応答同士をグループ化する.
6. 各応答グループについて, 最大スコアの応答のみを残す.
7. 残った応答のスコア上位`num_resonators`個を真の応答とみなす.

## 応答スコア

1. 高パワー帯のピークの曲がりが強いほど高スコア.
2. 低パワー帯のピークの突出度が高いほど高スコア.

1 -> 2の優先順位で順序づける.

## 設定ファイル

- `remove_false_spike`: 測定器由来の偽応答の除外に使うパラメータ. 除外範囲の配列
- `estimate_resonator_frequency`: 応答の検出に使うパラメータ. 以下それぞれのパラメータについて解説
- `num_resonators`: 検出する共振器の数
- `high_power_min`: 高パワー帯(=応答が曲がる帯域)のピーク検出に使うパワー下限
- `high_power_max`: 高パワー帯(=応答が曲がる帯域)のピーク検出に使うパワー上限
- `low_power`: 低パワー帯(=応答が真っ直ぐな帯域)のピーク検出に使うパワー
- `find_peaks_conf_(high/low)`: (高/低)パワー帯のピーク検出に使うパラメータ
- `find_peaks_conf_*.smooth_sigma`: 平滑化の強さ
- `find_peaks_conf_*.fp_conditions.distance`: 検出するピーク同士の最低距離(単位はxの1目盛)
- `find_peaks_conf_*.fp_conditions.prominence`: 検出するピークの最低突出度. この値が**低い**ほど敏感にピークを検出する
- `group_peaks_conf`: 高パワー帯のピークのグループ化に使うパラメータ
- `group_peaks_conf.x_backward_max`: ピークが逆側に曲がっていてもこの値までは同じグループとみなす(単位はxの1目盛)
- `group_peaks_conf.x_distance_max`: yの1目盛につきこの値以内の傾きなら同じグループとみなす(単位はxの1目盛)
- `compose_resonances_conf`: 高パワー帯のピークと低パワー帯のピークの対応づけに使うパラメータ
- `compose_resonances.x_distance_max`: 高パワー帯の一番下のピークと低パワー帯のピークについて, yの1目盛につきこの値以内の傾きなら同じ応答のピークと見做して対応づけを行う(単位はxの1目盛)
- `group_resonances_conf`: 対応づけ後の応答同士のグループ化に使うパラメータ
- `group_resonances_conf.x_distance_max`: この値以内にある応答同士を同グループとみなす(単位はxの1目盛)
